<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN - TrÃ¡mites</title>

<style>
body{font-family:Arial;background:#f5f8fa;padding:15px}
input,textarea,select,button{
  width:100%;padding:10px;margin-top:10px;
  border-radius:8px;border:1px solid #ccc
}
button{background:#1da1f2;color:#fff;font-size:16px;border:none}
</style>
</head>

<body>

<h2>ðŸ›  Crear aviso</h2>

<select id="tipo">
  <option value="ventas">Venta</option>
  <option value="noticias">Aviso</option>
</select>

<input id="texto" placeholder="Texto del aviso">

<input id="imagen" placeholder="URL de imagen (opcional)">

<input id="precio" placeholder="Precio (opcional)">

<button onclick="guardar()">Publicar</button>

<p id="estado"></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp }
from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCpZGsRlW_Vr9vJrlv4nCmJi7VDscld8Yw",
  authDomain: "tramites-a993f.firebaseapp.com",
  projectId: "tramites-a993f",
  storageBucket: "tramites-a993f.firebasestorage.app",
  messagingSenderId: "363617051453",
  appId: "1:363617051453:web:a5c46549c4057b06f51b54"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.guardar = async function(){
  const estado = document.getElementById("estado");
  estado.innerText = "Publicando...";

  await addDoc(collection(db,"posts"),{
    tipo: tipo.value,
    texto: texto.value,
    imagen: imagen.value,
    precio: precio.value,
    fecha: serverTimestamp()
  });

  estado.innerText = "âœ… Publicado correctamente";
  texto.value = imagen.value = precio.value = "";
};
</script>

</body>
</html>
